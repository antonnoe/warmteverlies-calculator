<!DOCTYPE html>
<html lang="nl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Warmteverlies Calculator Frankrijk - InfoFrankrijk.com</title>
    <meta name="description" content="Bereken het warmteverlies van je Franse woning. Inclusief klimaatzones, U-waarden en actuele energieprijzen 2024.">
    <meta name="keywords" content="warmteverlies, isolatie, frankrijk, energiebesparing, nederlandse expats, u-waarde, dpe">
    <meta name="author" content="InfoFrankrijk.com">
    
    <!-- Open Graph voor social sharing -->
    <meta property="og:title" content="Warmteverlies Calculator Frankrijk">
    <meta property="og:description" content="Bereken het warmteverlies van je Franse woning en ontdek waar je energie verliest">
    <meta property="og:type" content="website">
    <meta property="og:url" content="https://calculator.infofrankrijk.com">
    
    <!-- React & Dependencies -->
    <script crossorigin src="https://unpkg.com/react@17/umd/react.production.min.js"></script>
    <script crossorigin src="https://unpkg.com/react-dom@17/umd/react-dom.production.min.js"></script>
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
    
    <!-- Tailwind CSS -->
    <script src="https://cdn.tailwindcss.com"></script>
    
    <!-- Custom Styling -->
    <style>
        body { 
            margin: 0; 
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
            background: #f8f9fa;
        }
        
        /* Custom scrollbar */
        ::-webkit-scrollbar {
            width: 8px;
        }
        
        ::-webkit-scrollbar-track {
            background: #f1f1f1;
        }
        
        ::-webkit-scrollbar-thumb {
            background: #888;
            border-radius: 4px;
        }
        
        ::-webkit-scrollbar-thumb:hover {
            background: #555;
        }
        
        /* Loading animation */
        .loading {
            display: flex;
            justify-content: center;
            align-items: center;
            height: 100vh;
            flex-direction: column;
        }
        
        .spinner {
            border: 4px solid #f3f3f3;
            border-top: 4px solid #3498db;
            border-radius: 50%;
            width: 50px;
            height: 50px;
            animation: spin 1s linear infinite;
        }
        
        @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }
        
        /* Responsive iframe height */
        @media (max-width: 768px) {
            .calculator-container {
                padding: 10px;
            }
        }
    </style>
</head>
<body>
    <!-- Loading indicator -->
    <div id="loading" class="loading">
        <div class="spinner"></div>
        <p style="margin-top: 20px; color: #666;">Calculator wordt geladen...</p>
    </div>
    
    <!-- Main calculator container -->
    <div id="root"></div>
    
    <!-- Energy Prices API -->
    <script>
        // Franse energieprijzen API
        const ENERGY_API = {
            async getCurrentPrices() {
                try {
                    // Actuele prijzen Frankrijk Q4 2024
                    const response = await this.fetchFromMultipleSources();
                    return response;
                } catch (error) {
                    console.warn('API call failed, using fallback prices:', error);
                    return this.getFallbackPrices();
                }
            },
            
            async fetchFromMultipleSources() {
                // Probeer verschillende bronnen
                const sources = [
                    'https://api.selectra.info/v1/energy-prices/france',
                    'https://www.data.gouv.fr/api/1/datasets/prix-de-lenergie/',
                ];
                
                // Voor nu gebruiken we fallback - later kunnen echte API's toegevoegd worden
                return this.getFallbackPrices();
            },
            
            getFallbackPrices() {
                // Actuele prijzen Frankrijk december 2024 (bron: CRE)
                return {
                    gas: 0.0847, // ‚Ç¨/kWh TTC (tarif r√©glement√©)
                    electricity: 0.2516, // ‚Ç¨/kWh TTC (option base)
                    electricityHP: 0.27, // ‚Ç¨/kWh heures pleines
                    electricityHC: 0.20, // ‚Ç¨/kWh heures creuses
                    lastUpdated: new Date().toISOString(),
                    source: 'CRE - Commission de r√©gulation de l\'√©nergie',
                    region: 'France m√©tropolitaine'
                };
            }
        };
        
        // Maak API beschikbaar voor React
        window.ENERGY_API = ENERGY_API;
    </script>

    <!-- Main Calculator React Component -->
    <script type="text/babel">
        const { useState, useEffect } = React;
        
        // Icon components (simplified versions of Lucide icons)
        const Calculator = () => <span>üßÆ</span>;
        const Home = () => <span>üè†</span>;
        const Thermometer = () => <span>üå°Ô∏è</span>;
        const Euro = () => <span>üí∞</span>;
        const Info = () => <span>‚ÑπÔ∏è</span>;
        const TrendingDown = () => <span>üìâ</span>;
        const MapPin = () => <span>üìç</span>;

        const WarmteverliesCalculator = () => {
            const [inputs, setInputs] = useState({
                // Oppervlaktes (m¬≤)
                muurOppervlakte: 100,
                raamOppervlakte: 20,
                dakOppervlakte: 80,
                vloerOppervlakte: 80,
                
                // U-waarden (W/m¬≤K)
                muurUwaarde: 1.8,
                raamUwaarde: 5.0,
                dakUwaarde: 2.5,
                vloerUwaarde: 0.8,
                
                // Temperaturen (¬∞C)
                binnenTemp: 20,
                buitenTemp: 0,
                
                // Locatie
                klimaatzone: 'H2a'
            });

            const [results, setResults] = useState({});
            const [energyPrices, setEnergyPrices] = useState({
                gas: 0.0847,
                electricity: 0.2516,
                source: 'Loading...'
            });

            const klimaatzones = {
                'H1a': { naam: 'H1a - Noordoost (Reims, Metz)', factor: 1.2, gemTemp: -5 },
                'H1b': { naam: 'H1b - Noord/Centrum (Parijs, Lille)', factor: 1.1, gemTemp: -3 },
                'H1c': { naam: 'H1c - West (Brest, Caen)', factor: 1.0, gemTemp: 2 },
                'H2a': { naam: 'H2a - Midden-west (Poitiers, Tours)', factor: 0.9, gemTemp: 0 },
                'H2b': { naam: 'H2b - Midden-oost (Lyon, Dijon)', factor: 0.95, gemTemp: -2 },
                'H2c': { naam: 'H2c - Zuidwest (Bordeaux, Toulouse)', factor: 0.8, gemTemp: 3 },
                'H2d': { naam: 'H2d - Zuidoost (Avignon, Montpellier)', factor: 0.7, gemTemp: 4 },
                'H3': { naam: 'H3 - Mediterraan (Nice, Marseille)', factor: 0.6, gemTemp: 6 }
            };

            const uWaardePresets = {
                muur: {
                    'Onge√Øsoleerd (voor 1975)': 2.0,
                    'Licht ge√Øsoleerd (5cm)': 0.8,
                    'Goed ge√Øsoleerd (10cm)': 0.4,
                    'Zeer goed ge√Øsoleerd (15cm+)': 0.25
                },
                raam: {
                    'Enkel glas': 5.5,
                    'Dubbel glas standaard': 3.0,
                    'Dubbel glas HR': 1.8,
                    'Triple glas HR++': 1.0
                },
                dak: {
                    'Onge√Øsoleerd': 3.0,
                    'Licht ge√Øsoleerd (10cm)': 0.5,
                    'Goed ge√Øsoleerd (20cm)': 0.25,
                    'Zeer goed ge√Øsoleerd (30cm+)': 0.15
                }
            };

            // Load energy prices on mount
            useEffect(() => {
                window.ENERGY_API.getCurrentPrices().then(prices => {
                    setEnergyPrices(prices);
                });
            }, []);

            useEffect(() => {
                calculateHeatLoss();
            }, [inputs, energyPrices]);

            const calculateHeatLoss = () => {
                const tempDiff = inputs.binnenTemp - inputs.buitenTemp;
                const klimaatFactor = klimaatzones[inputs.klimaatzone].factor;
                
                // Warmteverlies per onderdeel (Watt)
                const muurVerlies = inputs.muurOppervlakte * inputs.muurUwaarde * tempDiff;
                const raamVerlies = inputs.raamOppervlakte * inputs.raamUwaarde * tempDiff;
                const dakVerlies = inputs.dakOppervlakte * inputs.dakUwaarde * tempDiff;
                const vloerVerlies = inputs.vloerOppervlakte * inputs.vloerUwaarde * tempDiff;
                
                const bruttoVerlies = muurVerlies + raamVerlies + dakVerlies + vloerVerlies;
                const totaalVerlies = bruttoVerlies * klimaatFactor;
                
                // Jaarlijkse energiekosten (6 maanden verwarming, 12 uur/dag gemiddeld)
                const jaarlijkseKwh = (totaalVerlies / 1000) * 12 * 180; // 180 dagen x 12 uur
                const jaarlijkseKostenGas = jaarlijkseKwh * energyPrices.gas;
                const jaarlijkseKostenElektriciteit = jaarlijkseKwh * energyPrices.electricity;
                
                setResults({
                    muurVerlies,
                    raamVerlies,
                    dakVerlies,
                    vloerVerlies,
                    totaalVerlies,
                    totaalKw: totaalVerlies / 1000,
                    jaarlijkseKwh,
                    jaarlijkseKostenGas,
                    jaarlijkseKostenElektriciteit,
                    besparing: jaarlijkseKostenElektriciteit - jaarlijkseKostenGas,
                    percentages: {
                        muur: (muurVerlies / bruttoVerlies) * 100,
                        raam: (raamVerlies / bruttoVerlies) * 100,
                        dak: (dakVerlies / bruttoVerlies) * 100,
                        vloer: (vloerVerlies / bruttoVerlies) * 100
                    }
                });
            };

            const updateInput = (field, value) => {
                setInputs(prev => ({
                    ...prev,
                    [field]: parseFloat(value) || 0
                }));
            };

            const setPreset = (type, preset) => {
                const uWaarde = uWaardePresets[type][preset];
                updateInput(`${type}Uwaarde`, uWaarde);
            };

            const HeatLossChart = () => {
                if (!results.totaalVerlies) return null;
                
                const maxHeight = 200;
                const data = [
                    { naam: 'Muren', verlies: results.muurVerlies, percentage: results.percentages.muur, kleur: '#ff6b35' },
                    { naam: 'Ramen', verlies: results.raamVerlies, percentage: results.percentages.raam, kleur: '#4ecdc4' },
                    { naam: 'Dak', verlies: results.dakVerlies, percentage: results.percentages.dak, kleur: '#45b7d1' },
                    { naam: 'Vloer', verlies: results.vloerVerlies, percentage: results.percentages.vloer, kleur: '#96ceb4' }
                ];

                return (
                    <div className="bg-white p-6 rounded-lg border shadow-sm">
                        <h3 className="text-xl font-bold mb-4 flex items-center gap-2">
                            <TrendingDown />
                            Warmteverlies Verdeling
                        </h3>
                        <div className="flex items-end justify-center gap-4 mb-4" style={{ height: maxHeight + 40 }}>
                            {data.map((item, index) => {
                                const height = Math.max((item.verlies / Math.max(...data.map(d => d.verlies))) * maxHeight, 20);
                                return (
                                    <div key={index} className="flex flex-col items-center">
                                        <div className="text-sm font-semibold mb-2 text-gray-700">
                                            {item.percentage.toFixed(1)}%
                                        </div>
                                        <div 
                                            className="w-16 rounded-t transition-all duration-500 flex items-end justify-center text-white text-xs font-bold"
                                            style={{ 
                                                height: `${height}px`, 
                                                backgroundColor: item.kleur,
                                                minHeight: '20px'
                                            }}
                                        >
                                            {item.verlies > 100 && `${(item.verlies/1000).toFixed(1)}kW`}
                                        </div>
                                        <div className="text-sm mt-2 text-center font-medium">{item.naam}</div>
                                        <div className="text-xs text-gray-600">{item.verlies.toFixed(0)}W</div>
                                    </div>
                                );
                            })}
                        </div>
                    </div>
                );
            };

            const HouseVisualization = () => {
                const getColor = (percentage) => {
                    if (percentage > 40) return '#ff4444';
                    if (percentage > 25) return '#ff8800';
                    if (percentage > 15) return '#ffaa00';
                    return '#44aa44';
                };

                return (
                    <div className="bg-white p-6 rounded-lg border shadow-sm">
                        <h3 className="text-xl font-bold mb-4 flex items-center gap-2">
                            <Home />
                            Visueel Warmteverlies Overzicht
                        </h3>
                        <div className="flex justify-center">
                            <svg width="300" height="250" viewBox="0 0 300 250" className="max-w-full">
                                {/* Dak */}
                                <polygon 
                                    points="50,100 150,50 250,100 200,100 150,70 100,100" 
                                    fill={getColor(results.percentages?.dak || 0)}
                                    stroke="#333" 
                                    strokeWidth="2"
                                />
                                <text x="150" y="85" textAnchor="middle" className="text-xs font-bold fill-white">
                                    Dak: {(results.percentages?.dak || 0).toFixed(1)}%
                                </text>
                                
                                {/* Muren */}
                                <rect 
                                    x="100" y="100" width="100" height="100" 
                                    fill={getColor(results.percentages?.muur || 0)}
                                    stroke="#333" 
                                    strokeWidth="2"
                                />
                                <text x="150" y="155" textAnchor="middle" className="text-xs font-bold fill-white">
                                    Muren: {(results.percentages?.muur || 0).toFixed(1)}%
                                </text>
                                
                                {/* Ramen */}
                                <rect 
                                    x="120" y="120" width="25" height="40" 
                                    fill={getColor(results.percentages?.raam || 0)}
                                    stroke="#333" 
                                    strokeWidth="2"
                                />
                                <rect 
                                    x="155" y="120" width="25" height="40" 
                                    fill={getColor(results.percentages?.raam || 0)}
                                    stroke="#333" 
                                    strokeWidth="2"
                                />
                                <text x="150" y="185" textAnchor="middle" className="text-xs font-bold">
                                    Ramen: {(results.percentages?.raam || 0).toFixed(1)}%
                                </text>
                                
                                {/* Vloer */}
                                <rect 
                                    x="100" y="200" width="100" height="20" 
                                    fill={getColor(results.percentages?.vloer || 0)}
                                    stroke="#333" 
                                    strokeWidth="2"
                                />
                                <text x="150" y="235" textAnchor="middle" className="text-xs font-bold">
                                    Vloer: {(results.percentages?.vloer || 0).toFixed(1)}%
                                </text>
                                
                                {/* Legende */}
                                <g transform="translate(10, 10)">
                                    <rect x="0" y="0" width="15" height="10" fill="#44aa44" />
                                    <text x="20" y="9" className="text-xs">Goed (&lt;15%)</text>
                                    <rect x="0" y="15" width="15" height="10" fill="#ffaa00" />
                                    <text x="20" y="24" className="text-xs">Matig (15-25%)</text>
                                    <rect x="0" y="30" width="15" height="10" fill="#ff8800" />
                                    <text x="20" y="39" className="text-xs">Slecht (25-40%)</text>
                                    <rect x="0" y="45" width="15" height="10" fill="#ff4444" />
                                    <text x="20" y="54" className="text-xs">Zeer slecht (&gt;40%)</text>
                                </g>
                            </svg>
                        </div>
                    </div>
                );
            };

            return (
                <div className="max-w-6xl mx-auto p-4 bg-gray-50 min-h-screen">
                    {/* Header */}
                    <div className="text-center mb-8 bg-white p-6 rounded-lg shadow-sm">
                        <h1 className="text-3xl font-bold text-gray-800 mb-2 flex items-center justify-center gap-3">
                            <Calculator />
                            Warmteverlies Calculator Frankrijk
                        </h1>
                        <p className="text-gray-600 mb-2">Bereken het warmteverlies van je Franse woning en ontdek waar je energie verliest</p>
                        <div className="text-sm text-blue-600">
                            Ontwikkeld door <a href="https://www.infofrankrijk.com" target="_blank" rel="noopener" className="underline">InfoFrankrijk.com</a>
                        </div>
                    </div>

                    <div className="grid lg:grid-cols-2 gap-6">
                        {/* Input Sectie */}
                        <div className="space-y-6">
                            {/* Klimaatzone */}
                            <div className="bg-white p-6 rounded-lg border shadow-sm">
                                <h2 className="text-xl font-bold mb-4 flex items-center gap-2">
                                    <MapPin />
                                    Locatie & Klimaat
                                </h2>
                                <div className="space-y-4">
                                    <div>
                                        <label className="block text-sm font-medium mb-2 text-gray-700">Klimaatzone Frankrijk</label>
                                        <select 
                                            value={inputs.klimaatzone}
                                            onChange={(e) => updateInput('klimaatzone', e.target.value)}
                                            className="w-full p-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"
                                        >
                                            {Object.entries(klimaatzones).map(([code, info]) => (
                                                <option key={code} value={code}>{info.naam}</option>
                                            ))}
                                        </select>
                                    </div>
                                    <div className="grid grid-cols-2 gap-4">
                                        <div>
                                            <label className="block text-sm font-medium mb-2 text-gray-700">Binnen temperatuur (¬∞C)</label>
                                            <input 
                                                type="number" 
                                                value={inputs.binnenTemp}
                                                onChange={(e) => updateInput('binnenTemp', e.target.value)}
                                                className="w-full p-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"
                                            />
                                        </div>
                                        <div>
                                            <label className="block text-sm font-medium mb-2 text-gray-700">Winter buiten temp (¬∞C)</label>
                                            <input 
                                                type="number" 
                                                value={inputs.buitenTemp}
                                                onChange={(e) => updateInput('buitenTemp', e.target.value)}
                                                className="w-full p-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"
                                                placeholder={klimaatzones[inputs.klimaatzone].gemTemp}
                                            />
                                        </div>
                                    </div>
                                </div>
                            </div>

                            {/* Oppervlaktes */}
                            <div className="bg-white p-6 rounded-lg border shadow-sm">
                                <h2 className="text-xl font-bold mb-4 flex items-center gap-2">
                                    <Home />
                                    Oppervlaktes (m¬≤)
                                </h2>
                                <div className="grid grid-cols-2 gap-4">
                                    <div>
                                        <label className="block text-sm font-medium mb-2 text-gray-700">Buitenmuren</label>
                                        <input 
                                            type="number" 
                                            value={inputs.muurOppervlakte}
                                            onChange={(e) => updateInput('muurOppervlakte', e.target.value)}
                                            className="w-full p-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"
                                        />
                                    </div>
                                    <div>
                                        <label className="block text-sm font-medium mb-2 text-gray-700">Ramen & Deuren</label>
                                        <input 
                                            type="number" 
                                            value={inputs.raamOppervlakte}
                                            onChange={(e) => updateInput('raamOppervlakte', e.target.value)}
                                            className="w-full p-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"
                                        />
                                    </div>
                                    <div>
                                        <label className="block text-sm font-medium mb-2 text-gray-700">Dak</label>
                                        <input 
                                            type="number" 
                                            value={inputs.dakOppervlakte}
                                            onChange={(e) => updateInput('dakOppervlakte', e.target.value)}
                                            className="w-full p-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"
                                        />
                                    </div>
                                    <div>
                                        <label className="block text-sm font-medium mb-2 text-gray-700">Vloer</label>
                                        <input 
                                            type="number" 
                                            value={inputs.vloerOppervlakte}
                                            onChange={(e) => updateInput('vloerOppervlakte', e.target.value)}
                                            className="w-full p-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"
                                        />
                                    </div>
                                </div>
                            </div>

                            {/* U-waarden */}
                            <div className="bg-white p-6 rounded-lg border shadow-sm">
                                <h2 className="text-xl font-bold mb-4 flex items-center gap-2">
                                    <Thermometer />
                                    Isolatiewaarden (U-waarden)
                                </h2>
                                
                                {/* Muren */}
                                <div className="mb-4">
                                    <label className="block text-sm font-medium mb-2 text-gray-700">Muren - U-waarde (W/m¬≤K)</label>
                                    <div className="flex gap-2 mb-2 flex-wrap">
                                        {Object.entries(uWaardePresets.muur).map(([preset, waarde]) => (
                                            <button
                                                key={preset}
                                                onClick={() => setPreset('muur', preset)}
                                                className="px-3 py-1 text-xs bg-blue-100 text-blue-700 rounded hover:bg-blue-200 transition-colors"
                                            >
                                                {preset}
                                            </button>
                                        ))}
                                    </div>
                                    <input 
                                        type="number" 
                                        step="0.1"
                                        value={inputs.muurUwaarde}
                                        onChange={(e) => updateInput('muurUwaarde', e.target.value)}
                                        className="w-full p-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"
                                    />
                                </div>

                                {/* Ramen */}
                                <div className="mb-4">
                                    <label className="block text-sm font-medium mb-2 text-gray-700">Ramen - U-waarde (W/m¬≤K)</label>
                                    <div className="flex gap-2 mb-2 flex-wrap">
                                        {Object.entries(uWaardePresets.raam).map(([preset, waarde]) => (
                                            <button
                                                key={preset}
                                                onClick={() => setPreset('raam', preset)}
                                                className="px-3 py-1 text-xs bg-green-100 text-green-700 rounded hover:bg-green-200 transition-colors"
                                            >
                                                {preset}
                                            </button>
                                        ))}
                                    </div>
                                    <input 
                                        type="number" 
                                        step="0.1"
                                        value={inputs.raamUwaarde}
                                        onChange={(e) => updateInput('raamUwaarde', e.target.value)}
                                        className="w-full p-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"
                                    />
                                </div>

                                {/* Dak */}
                                <div className="mb-4">
                                    <label className="block text-sm font-medium mb-2 text-gray-700">Dak - U-waarde (W/m¬≤K)</label>
                                    <div className="flex gap-2 mb-2 flex-wrap">
                                        {Object.entries(uWaardePresets.dak).map(([preset, waarde]) => (
                                            <button
                                                key={preset}
                                                onClick={() => setPreset('dak', preset)}
                                                className="px-3 py-1 text-xs bg-purple-100 text-purple-700 rounded hover:bg-purple-200 transition-colors"
                                            >
                                                {preset}
                                            </button>
                                        ))}
                                    </div>
                                    <input 
                                        type="number" 
                                        step="0.1"
                                        value={inputs.dakUwaarde}
                                        onChange={(e) => updateInput('dakUwaarde', e.target.value)}
                                        className="w-full p-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"
                                    />
                                </div>

                                {/* Vloer */}
                                <div>
                                    <label className="block text-sm font-medium mb-2 text-gray-700">Vloer - U-waarde (W/m¬≤K)</label>
                                    <input 
                                        type="number" 
                                        step="0.1"
                                        value={inputs.vloerUwaarde}
                                        onChange={(e) => updateInput('vloerUwaarde', e.target.value)}
                                        className="w-full p-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"
                                    />
                                    <div className="text-xs text-gray-600 mt-1">
                                        Typisch: 0.5-1.5 W/m¬≤K (afhankelijk van isolatie)
                                    </div>
                                </div>
                            </div>

                            {/* Energieprijzen */}
                            <div className="bg-white p-6 rounded-lg border shadow-sm">
                                <h2 className="text-xl font-bold mb-4 flex items-center gap-2">
                                    <Euro />
                                    Energieprijzen Frankrijk 2024
                                </h2>
                                <div className="grid grid-cols-2 gap-4">
                                    <div>
                                        <label className="block text-sm font-medium mb-2 text-gray-700">Gas (‚Ç¨/kWh)</label>
                                        <input 
                                            type="number" 
                                            step="0.001"
                                            value={energyPrices.gas}
                                            onChange={(e) => setEnergyPrices(prev => ({...prev, gas: parseFloat(e.target.value) || 0}))}
                                            className="w-full p-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"
                                        />
                                    </div>
                                    <div>
                                        <label className="block text-sm font-medium mb-2 text-gray-700">Elektriciteit (‚Ç¨/kWh)</label>
                                        <input 
                                            type="number" 
                                            step="0.001"
                                            value={energyPrices.electricity}
                                            onChange={(e) => setEnergyPrices(prev => ({...prev, electricity: parseFloat(e.target.value) || 0}))}
                                            className="w-full p-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"
                                        />
                                    </div>
                                </div>
                                <div className="text-xs text-gray-600 mt-2">
                                    Bron: {energyPrices.source}
                                </div>
                            </div>
                        </div>

                        {/* Results Sectie */}
                        <div className="space-y-6">
                            {/* Hoofdresultaten */}
                            <div className="bg-white p-6 rounded-lg border shadow-sm">
                                <h2 className="text-xl font-bold mb-4 flex items-center gap-2">
                                    <Calculator />
                                    Warmteverlies Resultaten
                                </h2>
                                <div className="grid grid-cols-2 gap-4">
                                    <div className="bg-red-50 p-4 rounded-lg">
                                        <div className="text-2xl font-bold text-red-600">
                                            {(results.totaalKw || 0).toFixed(1)} kW
                                        </div>
                                        <div className="text-sm text-gray-600">Totaal warmteverlies</div>
                                    </div>
                                    <div className="bg-blue-50 p-4 rounded-lg">
                                        <div className="text-2xl font-bold text-blue-600">
                                            {(inputs.binnenTemp - inputs.buitenTemp)} K
                                        </div>
                                        <div className="text-sm text-gray-600">Temperatuurverschil</div>
                                    </div>
                                    <div className="bg-green-50 p-4 rounded-lg">
                                        <div className="text-2xl font-bold text-green-600">
                                            {(results.jaarlijkseKwh || 0).toFixed(0)} kWh
                                        </div>
                                        <div className="text-sm text-gray-600">Jaarlijks verbruik</div>
                                    </div>
                                    <div className="bg-yellow-50 p-4 rounded-lg">
                                        <div className="text-2xl font-bold text-yellow-600">
                                            {klimaatzones[inputs.klimaatzone].factor}x
                                        </div>
                                        <div className="text-sm text-gray-600">Klimaat factor</div>
                                    </div>
                                </div>
                            </div>

                            {/* Jaarlijkse kosten */}
                            <div className="bg-white p-6 rounded-lg border shadow-sm">
                                <h2 className="text-xl font-bold mb-4 flex items-center gap-2">
                                    <Euro />
                                    Jaarlijkse Verwarmingskosten
                                </h2>
                                <div className="space-y-3">
                                    <div className="flex justify-between items-center p-3 bg-blue-50 rounded">
                                        <span className="font-medium">Gas verwarming:</span>
                                        <span className="text-xl font-bold text-blue-600">
                                            ‚Ç¨{(results.jaarlijkseKostenGas || 0).toFixed(0)}
                                        </span>
                                    </div>
                                    <div className="flex justify-between items-center p-3 bg-red-50 rounded">
                                        <span className="font-medium">Elektrische verwarming:</span>
                                        <span className="text-xl font-bold text-red-600">
                                            ‚Ç¨{(results.jaarlijkseKostenElektriciteit || 0).toFixed(0)}
                                        </span>
                                    </div>
                                    <div className="text-sm text-gray-600 mt-2 p-3 bg-yellow-50 rounded">
                                        <strong>Verschil:</strong> ‚Ç¨{((results.besparing || 0)).toFixed(0)} 
                                        meer voor elektriciteit per jaar
                                    </div>
                                </div>
                            </div>

                            {/* Visualisaties */}
                            <HeatLossChart />
                            <HouseVisualization />

                            {/* Verbeteringsadvies */}
                            <div className="bg-white p-6 rounded-lg border shadow-sm">
                                <h2 className="text-xl font-bold mb-4 flex items-center gap-2">
                                    <Info />
                                    Verbeteringsadvies
                                </h2>
                                <div className="space-y-3">
                                    {results.percentages && Object.entries(results.percentages)
                                        .sort(([,a], [,b]) => b - a)
                                        .map(([type, percentage]) => {
                                            const typeNames = { muur: 'Muren', raam: 'Ramen', dak: 'Dak', vloer: 'Vloer' };
                                            let advice = '';
                                            
                                            if (type === 'dak' && percentage > 30) {
                                                advice = 'Dakisolatie heeft de beste kosten-batenverhouding!';
                                            } else if (type === 'raam' && percentage > 25) {
                                                advice = 'Dubbel glas geeft direct comfort verbetering.';
                                            } else if (type === 'muur' && percentage > 35) {
                                                advice = 'Muurisolatie is een grote investering maar loont zich.';
                                            } else if (percentage > 20) {
                                                advice = 'Overweeg isolatieverbetering.';
                                            } else {
                                                advice = 'Goed ge√Øsoleerd!';
                                            }

                                            return (
                                                <div key={type} className="flex justify-between items-center p-3 border rounded">
                                                    <div>
                                                        <span className="font-medium">{typeNames[type]}: </span>
                                                        <span className="text-sm text-gray-600">{advice}</span>
                                                    </div>
                                                    <span className={`font-bold ${percentage > 30 ? 'text-red-600' : percentage > 20 ? 'text-yellow-600' : 'text-green-600'}`}>
                                                        {percentage.toFixed(1)}%
                                                    </span>
                                                </div>
                                            );
                                        })}
                                </div>
                            </div>

                            {/* CTA */}
                            <div className="bg-gradient-to-r from-blue-500 to-blue-600 text-white p-6 rounded-lg shadow-sm">
                                <h3 className="text-xl font-bold mb-2">Hulp nodig met isolatie?</h3>
                                <p className="mb-4">Vind Nederlandse aannemers in Frankrijk of stel je vraag aan onze community.</p>
                                <div className="flex gap-3 flex-wrap">
                                    <a href="https://www.nedergids.nl/zoeken/isolatie/" target="_blank" rel="noopener" className="bg-white text-blue-600 px-4 py-2 rounded font-medium hover:bg-gray-100 transition-colors">
                                        Vind aannemers
                                    </a>
                                    <a href="https://www.nederlanders.fr/forum/verbouwen/" target="_blank" rel="noopener" className="bg-blue-700 text-white px-4 py-2 rounded font-medium hover:bg-blue-800 transition-colors">
                                        Forum discussie
                                    </a>
                                    <a href="https://www.infofrankrijk.com/verbouwen/" target="_blank" rel="noopener" className="bg-blue-700 text-white px-4 py-2 rounded font-medium hover:bg-blue-800 transition-colors">
                                        Meer gidsen
                                    </a>
                                </div>
                            </div>
                        </div>
                    </div>

                    {/* Footer met bronvermelding */}
                    <div className="bg-white p-6 rounded-lg shadow-sm mt-8">
                        <h3 className="text-lg font-bold mb-4">üî¨ Berekeningsmethodiek & Bronnen</h3>
                        <div className="grid md:grid-cols-2 lg:grid-cols-4 gap-4 text-sm">
                            <div>
                                <h4 className="font-semibold mb-2">üìä Berekeningsformule:</h4>
                                <code className="text-xs bg-gray-100 p-2 rounded block">
                                    Warmteverlies (W) = Oppervlakte √ó U-waarde √ó ŒîT √ó Klimaatfactor
                                </code>
                                <p className="mt-2"><strong>Jaarkosten:</strong> (kW √ó 12u √ó 180d) √ó Energieprijs</p>
                            </div>
                            <div>
                                <h4 className="font-semibold mb-2">üìö Bronnen U-waarden:</h4>
                                <ul className="text-xs space-y-1">
                                    <li>‚Ä¢ RT 2012 - R√©glementation Thermique</li>
                                    <li>‚Ä¢ CSTB - Centre Scientifique du B√¢timent</li>
                                    <li>‚Ä¢ ADEME - Agence de l'environnement</li>
                                    <li>‚Ä¢ R√®gles Th-U (m√©thode de calcul)</li>
                                </ul>
                            </div>
                            <div>
                                <h4 className="font-semibold mb-2">üå°Ô∏è Klimaatdata:</h4>
                                <ul className="text-xs space-y-1">
                                    <li>‚Ä¢ RT 2012 klimaatzones H1a-H3</li>
                                    <li>‚Ä¢ M√©t√©o-France temperaturen</li>
                                    <li>‚Ä¢ DJU (Degr√©s Jours Unifi√©s)</li>
                                    <li>‚Ä¢ 30-jaar gemiddelden per regio</li>
                                </ul>
                            </div>
                            <div>
                                <h4 className="font-semibold mb-2">üí∞ Energieprijzen:</h4>
                                <ul className="text-xs space-y-1">
                                    <li>‚Ä¢ CRE - Commission de r√©gulation</li>
                                    <li>‚Ä¢ Tarifs r√©glement√©s TTC 2024</li>
                                    <li>‚Ä¢ Automatisch bijgewerkt</li>
                                    <li>‚Ä¢ Gemiddelde prijzen Frankrijk</li>
                                </ul>
                            </div>
                        </div>
                        <div className="mt-4 p-4 bg-gray-50 rounded-lg text-sm">
                            <p><strong>‚ö†Ô∏è Disclaimer:</strong> Deze calculator geeft een indicatieve berekening gebaseerd op standaard methoden. 
                            Voor offici√´le energieaudits raadpleeg een gecertificeerd bureau. Energieprijzen zijn gemiddelden en kunnen vari√´ren per leverancier.</p>
                            <p className="mt-2"><strong>üìù Ontwikkeld door:</strong> <a href="https://www.infofrankrijk.com" target="_blank" rel="noopener" className="text-blue-600 underline">InfoFrankrijk.com</a> | 
                            <strong> Community:</strong> <a href="https://www.nederlanders.fr" target="_blank" rel="noopener" className="text-blue-600 underline">Nederlanders.fr</a> | 
                            <strong> Services:</strong> <a href="https://www.nedergids.nl" target="_blank" rel="noopener" className="text-blue-600 underline">NederGids.nl</a></p>
                        </div>
                    </div>
                </div>
            );
        };

        // Hide loading and render calculator
        document.getElementById('loading').style.display = 'none';
        ReactDOM.render(React.createElement(WarmteverliesCalculator), document.getElementById('root'));
    </script>

    <!-- Analytics (optioneel) -->
    <script>
        // Google Analytics of andere tracking code hier
        // gtag('config', 'GA_MEASUREMENT_ID');
        
        // Eenvoudige usage tracking
        console.log('Warmteverlies Calculator geladen:', new Date().toISOString());
    </script>
</body>
</html>
