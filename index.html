<!DOCTYPE html>
<html lang="nl">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Energie- & Kostencalculator Frankrijk | InfoFrankrijk.com</title>
  <script src="https://cdn.tailwindcss.com"></script>
  <script crossorigin src="https://unpkg.com/react@18/umd/react.development.js"></script>
  <script crossorigin src="https://unpkg.com/react-dom@18/umd/react-dom.development.js"></script>
  <script crossorigin src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">
  <style>
    :root { --brand-color: #800000; }
    body { font-family: 'Inter', sans-serif; background-color: #f9fafb; }
    .accordion-content {
      max-height: 0;
      overflow: hidden;
      transition: max-height 0.4s cubic-bezier(0.4, 0, 0.2, 1);
    }
  </style>
</head>
<body>
  <div id="app"></div>

  <script type="text/babel">
    const { useState, useMemo, useCallback } = React;

    // --- Data & Constants (from index1.html) ---
    const ZONES = [ { id: 'med', name: 'Méditerranée (zacht)', hdd: 1400 }, { id: 'ouest', name: 'Zuid‑West / Atlantisch', hdd: 1900 }, { id: 'paris', name: 'Île‑de‑France / Parijs', hdd: 2200 }, { id: 'centre', name: 'Centraal / Bourgogne', hdd: 2500 }, { id: 'est', name: 'Oost / Elzas‑Lotharingen', hdd: 2800 }, { id: 'mont', name: 'Bergen (koel)', hdd: 3400 }, ];
    const PV_YIELD = { med: 1450, ouest: 1250, paris: 1150, centre: 1200, est: 1150, mont: 1100 };
    const DEFAULT_APPLIANCES = [ { key: 'fridge', label: 'Koelkast/vriezer', kwh: 250, on: true }, { key: 'wash', label: 'Wassen/drogen', kwh: 220, on: true }, { key: 'dish', label: 'Vaatwasser', kwh: 160, on: true }, { key: 'it', label: 'IT & randapparatuur', kwh: 150, on: true }, { key: 'tv', label: 'TV & media', kwh: 120, on: true }, { key: 'small', label: 'Kleine verbruikers', kwh: 150, on: true }, { key: 'lighting', label: 'Verlichting (LED)', kwh: 180, on: true }, ];
    const PRICE_DEFAULTS = { elec: 0.25, gas: 0.12, fioul: 0.12, pellet: 0.08, wood: 0.05, lpg: 0.18, petro: 0.20, water: 0.004 };
    const HEAT_MAIN = [ { key: 'elec', label: 'Elektrisch (direct)', eff: 1, unit: 'kWh', priceKey: 'elec' }, { key: 'hp', label: 'Warmtepomp (SCOP)', eff: 3.0, unit: 'kWh', priceKey: 'elec', scop: true }, { key: 'gas', label: 'Aardgas (ketel η)', eff: 0.9, unit: 'kWh eq.', priceKey: 'gas', eta: true }, { key: 'fioul', label: 'Fioul/mazout (η)', eff: 0.85, unit: 'kWh eq.', priceKey: 'fioul', eta: true }, { key: 'pellet', label: 'Pellet‑CV (η)', eff: 0.9, unit: 'kWh eq.', priceKey: 'pellet', eta: true }, { key: 'wood', label: 'Hout‑CV (η)', eff: 0.7, unit: 'kWh eq.', priceKey: 'wood', eta: true }, ];
    const HEAT_AUX = [ { key: 'none', label: 'Geen bijverwarming', eff: 1, priceKey: null }, { key: 'inverter', label: 'Inverter‑airco (SCOP)', eff: 3.2, priceKey: 'elec', scop: true }, { key: 'elec', label: 'Elektrisch (direct)', eff: 1, priceKey: 'elec' }, { key: 'pellet', label: 'Pelletkachel (η)', eff: 0.85, priceKey: 'pellet', eta: true }, { key: 'wood', label: 'Houtkachel (η)', eff: 0.6, priceKey: 'wood', eta: true }, { key: 'petro', label: 'Petroleumkachel (η)', eff: 0.9, priceKey: 'petro', eta: true }, ];
    const DHW_TYPES = [ { key: 'elec', label: 'Boiler elektrisch', eff: 1, priceKey: 'elec' }, { key: 'gas', label: 'Gasgeiser/ketel (η)', eff: 0.9, priceKey: 'gas', eta: true }, { key: 'hp', label: 'WP‑boiler (SCOP)', eff: 2.5, priceKey: 'elec', scop: true }, { key: 'solar', label: 'Zonneboiler', eff: 2.0, priceKey: 'elec', note: 'Hulp‑elektra*' }, ];
    const POOL_HEAT = [ { key: 'none', label: 'Geen verwarming', eff: Infinity, priceKey: null }, { key: 'elec', label: 'Elektrisch', eff: 1, priceKey: 'elec' }, { key: 'gas', label: 'Gas (η)', eff: 0.9, priceKey: 'gas', eta: true }, { key: 'hp', label: 'Warmtepomp (SCOP)', eff: 4, priceKey: 'elec', scop: true }, ];

    // --- Helper Components ---
    const fmt = new Intl.NumberFormat('nl-NL', { maximumFractionDigits: 0 });
    const money = (x) => new Intl.NumberFormat('nl-NL', { style: 'currency', currency: 'EUR', maximumFractionDigits: 0 }).format(x);
    const num = (v, d = 0) => { const n = Number(v); return Number.isFinite(n) ? n : d; };

    const Icon = ({ path, className = "w-6 h-6" }) => <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor" className={className}><path d={path} /></svg>;
    const icons = {
        building: "M12.75 4.75a.75.75 0 00-1.5 0v4.5h-4.5a.75.75 0 000 1.5h4.5v4.5a.75.75 0 001.5 0v-4.5h4.5a.75.75 0 000-1.5h-4.5v-4.5zM3.75 8.25a.75.75 0 000 1.5h3v1.5a.75.75 0 001.5 0v-1.5h3a.75.75 0 000-1.5h-3v-1.5a.75.75 0 00-1.5 0v1.5h-3zM6.75 16.5a.75.75 0 00-1.5 0v1.5h-1.5a.75.75 0 000 1.5h1.5v1.5a.75.75 0 001.5 0v-1.5h1.5a.75.75 0 000-1.5h-1.5v-1.5z",
        fire: "M15.362 4.362a1.75 1.75 0 012.474 0 1.75 1.75 0 010 2.474l-5.333 5.333-3.724-3.724a.75.75 0 011.06-1.06l2.664 2.664 5.333-5.333a.75.75 0 01-1.06-1.06l-5.333 5.333-2.664-2.664a1.75 1.75 0 010-2.474 1.75 1.75 0 012.474 0l2.664 2.664 5.333-5.333z",
        bolt: "M3.75 12h16.5m-16.5 3.75h16.5M3.75 19.5h16.5M5.25 4.5h13.5c.828 0 1.5.672 1.5 1.5v3.75c0 .828-.672 1.5-1.5 1.5H5.25c-.828 0-1.5-.672-1.5-1.5V6c0-.828.672-1.5 1.5-1.5z",
        sun: "M12 3.75a.75.75 0 01.75.75v1.5a.75.75 0 01-1.5 0v-1.5A.75.75 0 0112 3.75zM10.5 6.375a.75.75 0 00-1.06-1.06L8.375 6.375a.75.75 0 001.06 1.06l1.065-1.06zM3.75 12a.75.75 0 01.75-.75h1.5a.75.75 0 010 1.5h-1.5A.75.75 0 013.75 12zM8.375 17.625a.75.75 0 00-1.06 1.06l1.065 1.065a.75.75 0 001.06-1.06L8.375 17.625zM17.625 8.375a.75.75 0 001.06-1.06L17.625 6.375a.75.75 0 00-1.06 1.06l1.06 1.06zM12 18.75a.75.75 0 01.75.75v1.5a.75.75 0 01-1.5 0v-1.5a.75.75 0 01.75-.75zM17.625 17.625a.75.75 0 001.06 1.06l1.06-1.06a.75.75 0 00-1.06-1.06l-1.06 1.06zM18.75 12a.75.75 0 01.75-.75h1.5a.75.75 0 010 1.5h-1.5a.75.75 0 01-.75-.75z",
        beaker: "M9.75 21.75a.75.75 0 01-.75-.75V11.25a.75.75 0 011.5 0v9.75a.75.75 0 01-.75.75zM14.25 21.75a.75.75 0 01-.75-.75V11.25a.75.75 0 011.5 0v9.75a.75.75 0 01-.75.75zM12 2.25c-5.385 0-9.75 4.365-9.75 9.75s4.365 9.75 9.75 9.75 9.75-4.365 9.75-9.75S17.385 2.25 12 2.25zm0 18a8.25 8.25 0 100-16.5 8.25 8.25 0 000 16.5z",
        currency: "M2.25 18.75a.75.75 0 001.5 0v-12a.75.75 0 00-1.5 0v12zM6 18.75a.75.75 0 001.5 0v-12a.75.75 0 00-1.5 0v12zM10.5 18.75a.75.75 0 001.5 0v-12a.75.75 0 00-1.5 0v12zM15 18.75a.75.75 0 001.5 0v-12a.75.75 0 00-1.5 0v12zM19.5 18.75a.75.75 0 001.5 0v-12a.75.75 0 00-1.5 0v12z"
    };

    const AccordionSection = ({ icon, title, number, children, initiallyOpen = false }) => {
        const [isOpen, setIsOpen] = useState(initiallyOpen);
        const contentRef = React.useRef(null);

        return (
            <div className="bg-white border border-gray-200 rounded-xl shadow-sm">
                <button onClick={() => setIsOpen(!isOpen)} className="w-full flex items-center justify-between p-4 text-left">
                    <div className="flex items-center gap-4">
                        <div className="w-8 h-8 flex items-center justify-center bg-gray-100 rounded-full text-[var(--brand-color)]">{icon}</div>
                        <span className="font-semibold text-lg text-gray-800">{number}. {title}</span>
                    </div>
                    <Icon path={isOpen ? "M19.5 12h-15" : "M12 4.5v15m7.5-7.5h-15"} className="w-5 h-5 text-gray-500 transition-transform" />
                </button>
                <div ref={contentRef} className="accordion-content" style={{ maxHeight: isOpen ? contentRef.current.scrollHeight + "px" : "0" }}>
                    <div className="p-4 pt-0">{children}</div>
                </div>
            </div>
        );
    };

    // --- Main App Component ---
    function App() {
        // --- State declarations (from index1.html) ---
        const [zone, setZone] = useState('paris');
        const [setpoint, setSetpoint] = useState(20);
        const [wallA, setWallA] = useState(120), [wallU, setWallU] = useState(0.5);
        const [roofA, setRoofA] = useState(100), [roofU, setRoofU] = useState(0.25);
        const [floorA, setFloorA] = useState(100), [floorU, setFloorU] = useState(0.35);
        const [winA, setWinA] = useState(20), [winU, setWinU] = useState(1.5);
        const [volume, setVolume] = useState(250);
        const [ach, setAch] = useState(0.5);
        const [warmupPct, setWarmupPct] = useState(15);
        const [prices, setPrices] = useState({ ...PRICE_DEFAULTS });
        const [mainType, setMainType] = useState('hp');
        const [mainScop, setMainScop] = useState(3.2);
        const [mainEta, setMainEta] = useState(0.9);
        const [auxType, setAuxType] = useState('inverter');
        const [auxShare, setAuxShare] = useState(25);
        const [auxScop, setAuxScop] = useState(3.2);
        const [auxEta, setAuxEta] = useState(0.85);
        const [pvKwp, setPvKwp] = useState(3);
        const [pvSelfUse, setPvSelfUse] = useState(60);
        const [dhwType, setDhwType] = useState('hp');
        const [dhwScop, setDhwScop] = useState(2.5);
        const [dhwEta, setDhwEta] = useState(0.9);
        const [showers, setShowers] = useState(2);
        const [litersPer, setLitersPer] = useState(55);
        const [coldT, setColdT] = useState(12);
        const [hotT, setHotT] = useState(40);
        const [appls, setAppls] = useState(DEFAULT_APPLIANCES);
        const [evKmWeek, setEvKmWeek] = useState(100);
        const [evKwh100, setEvKwh100] = useState(18);
        const [evLoss, setEvLoss] = useState(10);
        const [poolHas, setPoolHas] = useState(false);
        const [poolVol, setPoolVol] = useState(30);
        const [poolDeltaT, setPoolDeltaT] = useState(3);
        const [poolSeason, setPoolSeason] = useState(5);
        const [poolHeatType, setPoolHeatType] = useState('hp');
        const [poolHpScop, setPoolHpScop] = useState(4);
        const [poolEta, setPoolEta] = useState(0.9);
        const [poolPumpW, setPoolPumpW] = useState(450);
        const [poolPumpH, setPoolPumpH] = useState(8);
        const [poolCover, setPoolCover] = useState(true);
        const [poolWind, setPoolWind] = useState(1);

        // --- Calculations (useMemo hooks from index1.html) ---
        const results = useMemo(() => {
            const hdd = ZONES.find(z => z.id === zone)?.hdd || 2200;
            const UA = num(wallA) * num(wallU) + num(roofA) * num(roofU) + num(floorA) * num(floorU) + num(winA) * num(winU);
            const Vloss = 0.34 * num(volume) * num(ach);
            const heatDemand = (UA + Vloss) * hdd / 1000 * (1 + num(warmupPct) / 100);
            
            const auxFrac = Math.min(0.9, num(auxShare) / 100);
            const mainFrac = 1 - auxFrac;
            const mainDef = HEAT_MAIN.find(h => h.key === mainType);
            const auxDef = HEAT_AUX.find(h => h.key === auxType) || {};
            const mainEff = mainDef?.scop ? num(mainScop, 3.2) : (mainDef?.eta ? num(mainEta, 0.9) : 1);
            const auxEff = auxDef?.scop ? num(auxScop, 3.2) : (auxDef?.eta ? num(auxEta, 0.85) : 1);
            const mainInput = mainFrac * heatDemand / mainEff;
            const auxInput = auxDef.key === 'none' ? 0 : (auxFrac * heatDemand / auxEff);
            const mainCost = (prices[mainDef?.priceKey] || 0) * mainInput;
            const auxCost = (prices[auxDef?.priceKey] || 0) * auxInput;

            const pvYield = num(pvKwp) > 0 ? num(pvKwp) * (PV_YIELD[zone] || 1150) : 0;
            const pvSelf = pvYield * (num(pvSelfUse) / 100);
            const elecHeat = (mainDef?.priceKey === 'elec' ? mainInput : 0) + (auxDef?.priceKey === 'elec' ? auxInput : 0);

            const dhwThermal = (num(showers) * num(litersPer) * 365 * Math.max(0, num(hotT) - num(coldT)) * 4.186) / 3600;
            const dhwDef = DHW_TYPES.find(d => d.key === dhwType);
            const dhwEff = dhwDef?.scop ? num(dhwScop, 2.5) : (dhwDef?.eta ? num(dhwEta, 0.9) : 1);
            const dhwInput = dhwThermal / dhwEff;
            const dhwCost = (prices[dhwDef?.priceKey] || 0) * dhwInput;
            const dhwElec = (dhwDef?.priceKey === 'elec') ? dhwInput : 0;
            
            const applKwh = appls.reduce((s, a) => s + (a.on ? num(a.kwh, 0) : 0), 0);
            const applCost = applKwh * (prices.elec || 0);

            const evKwhYear = (num(evKmWeek) * 52) * (num(evKwh100) / 100) * (1 + num(evLoss) / 100);
            const evCost = evKwhYear * (prices.elec || 0);

            let pool = { kwh: 0, cost: 0, elec: 0, gas: 0 };
            if (poolHas) {
                const days = num(poolSeason) * 30;
                const pumpKwh = (num(poolPumpW) / 1000) * num(poolPumpH) * days;
                const thermal = 1.16 * num(poolVol) * num(poolDeltaT) * num(poolSeason) * (poolCover ? 0.5 : 1) * num(poolWind);
                const def = POOL_HEAT.find(h => h.key === poolHeatType);
                const eff = def?.scop ? num(poolHpScop, 4) : (def?.eta ? num(poolEta, 0.9) : 1);
                const input = def.key === 'none' ? 0 : (thermal / eff);
                const elecUse = pumpKwh + (def?.priceKey === 'elec' ? input : 0);
                const gasUse = (def?.priceKey === 'gas' ? input : 0);
                pool = { kwh: pumpKwh + input, cost: elecUse * (prices.elec || 0) + gasUse * (prices.gas || 0), elec: elecUse, gas: gasUse };
            }
            
            const elecTotalGross = elecHeat + dhwElec + applKwh + evKwhYear + pool.elec;
            const elecNet = Math.max(0, elecTotalGross - pvSelf);
            const pvSelfValue = pvSelf * (prices.elec || 0);
            const elecCost = elecNet * (prices.elec || 0);
            const nonElecCost = (mainDef?.priceKey !== 'elec' ? mainCost : 0) + (auxDef?.priceKey !== 'elec' ? auxCost : 0) + (dhwDef?.priceKey !== 'elec' ? dhwCost : 0) + (pool.gas * (prices.gas || 0));
            const totalCost = elecCost + nonElecCost;

            return {
                hdd, UA, Vloss, heatDemand,
                totalCost, perMonth: totalCost / 12,
                costs: {
                    verwarming: mainCost + auxCost,
                    tapwater: dhwCost,
                    apparaten: applCost,
                    ev: evCost,
                    zwembad: pool.cost,
                    pvWaarde: -pvSelfValue
                },
                verbruik: {
                    nettoElec: elecNet,
                    brutoElec: elecTotalGross,
                    pvEigen: pvSelf,
                    warmte: mainInput + auxInput,
                    tapwater: dhwInput,
                    overig: applKwh + evKwhYear + pool.kwh
                }
            };
        }, [ zone, setpoint, wallA, wallU, roofA, roofU, floorA, floorU, winA, winU, volume, ach, warmupPct, prices, mainType, mainScop, mainEta, auxType, auxShare, auxScop, auxEta, pvKwp, pvSelfUse, dhwType, dhwScop, dhwEta, showers, litersPer, coldT, hotT, appls, evKmWeek, evKwh100, evLoss, poolHas, poolVol, poolDeltaT, poolSeason, poolHeatType, poolHpScop, poolEta, poolPumpW, poolPumpH, poolCover, poolWind ]);
        
        // --- UI Components ---
        const Input = ({ label, type = "number", value, onChange, unit, ...props }) => (
            <div>
                <label className="block text-sm font-medium text-gray-700 mb-1">{label}</label>
                <div className="flex">
                    <input type={type} value={value} onChange={e => onChange(e.target.value)} className="w-full p-2 border-gray-300 border rounded-l-md text-sm" {...props} />
                    {unit && <span className="inline-flex items-center px-3 rounded-r-md border border-l-0 border-gray-300 bg-gray-50 text-gray-500 text-sm">{unit}</span>}
                </div>
            </div>
        );

        const Select = ({ label, value, onChange, options }) => (
            <div>
                <label className="block text-sm font-medium text-gray-700 mb-1">{label}</label>
                <select value={value} onChange={e => onChange(e.target.value)} className="w-full p-2 border-gray-300 border rounded-md text-sm">
                    {options.map(o => <option key={o.key || o.id} value={o.key || o.id}>{o.label || o.name}</option>)}
                </select>
            </div>
        );

        const SummaryCard = ({ title, value, unit, children }) => (
            <div className="bg-gray-50 p-3 rounded-lg border border-gray-200">
                <div className="text-xs text-gray-600">{title}</div>
                <div className="text-xl font-bold text-[var(--brand-color)]">{fmt.format(value)} <span className="text-sm font-normal text-gray-500">{unit}</span></div>
                {children && <div className="text-xs text-gray-500 mt-1">{children}</div>}
            </div>
        );

        return (
            <div>
                <header className="bg-white border-b border-gray-200 p-4">
                    <div className="max-w-7xl mx-auto">
                        <h1 className="text-2xl font-bold text-[var(--brand-color)]">Energie- & Kostencalculator Frankrijk</h1>
                        <p className="text-gray-600">Een compleet model voor uw woning: van isolatie tot zonnepanelen.</p>
                    </div>
                </header>

                <main className="max-w-7xl mx-auto p-4 grid grid-cols-1 lg:grid-cols-3 gap-6">
                    <div className="lg:col-span-2 space-y-4">
                        <AccordionSection number={1} title="Klimaat & Woning" icon={<Icon path={icons.building} />} initiallyOpen={true}>
                            <div className="grid grid-cols-2 md:grid-cols-4 gap-4">
                                <Select label="Klimaatzone" value={zone} onChange={setZone} options={ZONES} />
                                <Input label="Binnen temperatuur" value={setpoint} onChange={setSetpoint} unit="°C" />
                                <Input label="Verwarmd volume" value={volume} onChange={setVolume} unit="m³" />
                                <Input label="Luchtwisselingen" value={ach} onChange={setAch} unit="1/uur" step={0.1}/>
                                <div className="col-span-full grid grid-cols-2 md:grid-cols-4 gap-4 p-4 bg-gray-50 rounded-lg border">
                                    <Input label="Muur (A & U)" value={wallA} onChange={setWallA} unit="m²" />
                                    <Input value={wallU} onChange={setWallU} unit="U" step={0.05} />
                                    <Input label="Dak (A & U)" value={roofA} onChange={setRoofA} unit="m²" />
                                    <Input value={roofU} onChange={setRoofU} unit="U" step={0.05}/>
                                    <Input label="Vloer (A & U)" value={floorA} onChange={setFloorA} unit="m²" />
                                    <Input value={floorU} onChange={setFloorU} unit="U" step={0.05}/>
                                    <Input label="Ramen (A & U)" value={winA} onChange={setWinA} unit="m²" />
                                    <Input value={winU} onChange={setWinU} unit="U" step={0.1}/>
                                </div>
                            </div>
                        </AccordionSection>

                        <AccordionSection number={2} title="Verwarming & Tapwater" icon={<Icon path={icons.fire} />}>
                             <div className="grid grid-cols-1 md:grid-cols-2 gap-6">
                                <div>
                                    <h3 className="font-semibold mb-2">Ruimteverwarming</h3>
                                    <div className="space-y-4">
                                        <Select label="Hoofdverwarming" value={mainType} onChange={setMainType} options={HEAT_MAIN} />
                                        {mainType === 'hp' && <Input label="SCOP Hoofd-WP" value={mainScop} onChange={setMainScop} step={0.1} />}
                                        {HEAT_MAIN.find(h=>h.key===mainType)?.eta && <Input label="Rendement η Hoofd" value={mainEta} onChange={setMainEta} step={0.01} />}
                                        <Select label="Bijverwarming" value={auxType} onChange={setAuxType} options={HEAT_AUX} />
                                        {auxType !== 'none' && <Input label="Aandeel bijverwarming" value={auxShare} onChange={setAuxShare} unit="%" />}
                                        {auxType === 'inverter' && <Input label="SCOP Bij-WP (Airco)" value={auxScop} onChange={setAuxScop} step={0.1} />}
                                        {HEAT_AUX.find(h=>h.key===auxType)?.eta && <Input label="Rendement η Bij" value={auxEta} onChange={setAuxEta} step={0.01} />}
                                    </div>
                                </div>
                                 <div>
                                    <h3 className="font-semibold mb-2">Warm Tapwater (ECS)</h3>
                                    <div className="space-y-4">
                                         <Select label="Type tapwater systeem" value={dhwType} onChange={setDhwType} options={DHW_TYPES} />
                                         {dhwType === 'hp' && <Input label="SCOP WP-boiler" value={dhwScop} onChange={setDhwScop} step={0.1} />}
                                         {DHW_TYPES.find(d=>d.key===dhwType)?.eta && <Input label="Rendement η" value={dhwEta} onChange={setDhwEta} step={0.01} />}
                                         <Input label="Douches per dag" value={showers} onChange={setShowers} step={0.5} />
                                         <Input label="Liters per douche" value={litersPer} onChange={setLitersPer} unit="L" />
                                    </div>
                                </div>
                             </div>
                        </AccordionSection>
                        
                        <AccordionSection number={3} title="Elektra: Verbruikers & PV" icon={<Icon path={icons.bolt} />}>
                            <div className="grid grid-cols-1 md:grid-cols-2 gap-6">
                                <div>
                                    <h3 className="font-semibold mb-2">Zonnepanelen (PV)</h3>
                                    <div className="space-y-4">
                                        <Input label="PV Systeem" value={pvKwp} onChange={setPvKwp} unit="kWp" step={0.1} />
                                        <Input label="Eigenverbruik" value={pvSelfUse} onChange={setPvSelfUse} unit="%" />
                                    </div>
                                    <h3 className="font-semibold mb-2 mt-6">Elektrische Auto (EV)</h3>
                                    <div className="space-y-4">
                                        <Input label="Kilometers per week" value={evKmWeek} onChange={setEvKmWeek} unit="km" />
                                        <Input label="Verbruik" value={evKwh100} onChange={setEvKwh100} unit="kWh/100km" />
                                    </div>
                                </div>
                                <div>
                                    <h3 className="font-semibold mb-2">Apparaten & Verlichting</h3>
                                    <div className="space-y-2">
                                        {appls.map((a, idx) => (
                                            <div key={a.key} className="flex items-center justify-between bg-gray-50 p-2 rounded-md border">
                                                <label className="flex items-center gap-2 text-sm">
                                                    <input type="checkbox" checked={a.on} onChange={e => setAppls(appls.map((item, i) => i === idx ? { ...item, on: e.target.checked } : item))} />
                                                    {a.label}
                                                </label>
                                                <input type="number" value={a.kwh} onChange={e => setAppls(appls.map((item, i) => i === idx ? { ...item, kwh: e.target.value } : item))} className="w-20 p-1 border rounded text-sm text-right" />
                                            </div>
                                        ))}
                                    </div>
                                </div>
                            </div>
                        </AccordionSection>
                        
                        <AccordionSection number={4} title="Optioneel: Zwembad" icon={<Icon path={icons.beaker} />}>
                             <label className="flex items-center gap-2 mb-4">
                                <input type="checkbox" checked={poolHas} onChange={e => setPoolHas(e.target.checked)} />
                                Activeer zwembadmodule
                            </label>
                            {poolHas && <div className="grid grid-cols-2 md:grid-cols-4 gap-4">
                                <Input label="Volume" value={poolVol} onChange={setPoolVol} unit="m³" />
                                <Input label="Seizoen" value={poolSeason} onChange={setPoolSeason} unit="mnd" />
                                <Select label="Verwarming" value={poolHeatType} onChange={setPoolHeatType} options={POOL_HEAT} />
                                {poolHeatType === 'hp' && <Input label="SCOP WP" value={poolHpScop} onChange={setPoolHpScop} step={0.1} />}
                                <Input label="Pomp vermogen" value={poolPumpW} onChange={setPoolPumpW} unit="W" />
                                <Input label="Pomp uren/dag" value={poolPumpH} onChange={setPoolPumpH} unit="uur" />
                                <Select label="Afdekking" value={poolCover} onChange={e => setPoolCover(e.target.value === 'true')} options={[{key: true, label: 'Ja'}, {key: false, label: 'Nee'}]} />
                            </div>}
                        </AccordionSection>

                        <AccordionSection number={5} title="Energieprijzen" icon={<Icon path={icons.currency} />}>
                            <div className="grid grid-cols-2 md:grid-cols-4 gap-4">
                                {Object.entries(PRICE_DEFAULTS).map(([key]) => (
                                    <Input key={key} label={key.charAt(0).toUpperCase() + key.slice(1)} value={prices[key]} onChange={val => setPrices(p => ({ ...p, [key]: val }))} unit={`€/${key === 'water' ? 'L' : 'kWh'}`} step={0.01} />
                                ))}
                            </div>
                        </AccordionSection>
                    </div>

                    <div className="lg:col-span-1 space-y-4 lg:sticky top-4 self-start">
                        <div className="bg-white p-4 rounded-xl border border-gray-200 shadow-lg">
                            <div className="text-center">
                                <div className="text-sm text-gray-600">Totale Geschatte Jaarkosten</div>
                                <div className="text-4xl font-bold my-2 text-[var(--brand-color)]">{money(results.totalCost)}</div>
                                <div className="text-gray-500">{money(results.perMonth)} / maand</div>
                            </div>
                            <div className="mt-4 space-y-2 border-t pt-4">
                                {Object.entries(results.costs).map(([key, value]) => (
                                    <div key={key} className="flex justify-between text-sm">
                                        <span className="text-gray-600 capitalize">{key.replace('Waarde', ' Waarde')}</span>
                                        <span className={`font-medium ${value < 0 ? 'text-green-600' : 'text-gray-800'}`}>{money(value)}</span>
                                    </div>
                                ))}
                            </div>
                        </div>
                         <div className="bg-white p-4 rounded-xl border border-gray-200">
                             <h3 className="font-semibold mb-2">Energiebalans (per jaar)</h3>
                             <div className="space-y-3">
                                 <SummaryCard title="Netto Elektra van net" value={results.verbruik.nettoElec} unit="kWh">
                                     Bruto: {fmt.format(results.verbruik.brutoElec)} kWh | PV Eigen: {fmt.format(results.verbruik.pvEigen)} kWh
                                 </SummaryCard>
                                 <SummaryCard title="Warmte (input, alle bronnen)" value={results.verbruik.warmte} unit="kWh eq." />
                                  <SummaryCard title="Tapwater (input)" value={results.verbruik.tapwater} unit="kWh" />
                                 <SummaryCard title="Overig (App, EV, Zwembad)" value={results.verbruik.overig} unit="kWh" />
                             </div>
                         </div>
                    </div>
                </main>
            </div>
        );
    }

    ReactDOM.createRoot(document.getElementById('app')).render(<App />);
  </script>
</body>
</html>