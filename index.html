<!DOCTYPE html>
<html lang="nl">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Energie- & Kostencalculator Frankrijk | InfoFrankrijk.com</title>
  <script src="https://cdn.tailwindcss.com"></script>
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">
  <style>
    :root { --brand-color: #800000; }
    body { font-family: 'Inter', sans-serif; background-color: #f9fafb; }
    .tooltip { position: relative; display: inline-flex; }
    .tooltip .tooltip-text { visibility: hidden; width: 250px; background-color: #333; color: #fff; text-align: left; border-radius: 6px; padding: 8px; position: absolute; z-index: 10; bottom: 125%; left: 50%; margin-left: -125px; opacity: 0; transition: opacity 0.3s; font-weight: 400; }
    .tooltip:hover .tooltip-text { visibility: visible; opacity: 1; }
    .accordion-content { display: grid; grid-template-rows: 0fr; transition: grid-template-rows 0.5s ease-in-out; }
    .accordion-content > div { overflow: hidden; }
    .accordion-content.open { grid-template-rows: 1fr; }
    @media print {
      body * { visibility: hidden; }
      #pdf-summary, #pdf-summary * { visibility: visible; }
      #pdf-summary { position: absolute; left: 0; top: 0; width: 100%; padding: 1rem; }
      .no-print { display: none !important; }
    }
  </style>
</head>
<body class="pb-24">

  <header class="bg-white border-b border-gray-200 p-4 no-print">
    <div class="max-w-7xl mx-auto flex justify-between items-center">
      <div>
        <h1 class="text-2xl font-bold text-[var(--brand-color)]">Energie- & Kostencalculator Frankrijk</h1>
        <p class="text-gray-600">Een compleet model voor uw woning: van isolatie tot zonnepanelen.</p>
      </div>
      <button id="pdf-button" class="bg-[var(--brand-color)] text-white px-4 py-2 rounded-lg font-semibold flex items-center gap-2">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20" fill="currentColor" class="w-5 h-5"><path fill-rule="evenodd" d="M5 2.75C5 1.784 5.784 1 6.75 1h6.5c.966 0 1.75.784 1.75 1.75v3.552c.377.095.74.254 1.075.474v-4.276A3.25 3.25 0 0013.25 0h-6.5A3.25 3.25 0 003.5 3.25v13.5A3.25 3.25 0 006.75 20h6.5a3.25 3.25 0 003.25-3.25v-4.276a2.25 2.25 0 01-1.075.474v3.552A1.75 1.75 0 0113.25 18h-6.5A1.75 1.75 0 015 16.25v-13.5z" clip-rule="evenodd" /><path fill-rule="evenodd" d="M10.5 7.06v-1.81a.75.75 0 00-1.5 0v1.81a.75.75 0 001.5 0zM10.5 10.06v4.19a.75.75 0 001.5 0v-4.19a.75.75 0 00-1.5 0zM10.5 17.06v-1.81a.75.75 0 00-1.5 0v1.81a.75.75 0 001.5 0z" clip-rule="evenodd" /></svg>
        Download / Print Samenvatting
      </button>
    </div>
  </header>

  <main class="max-w-7xl mx-auto p-4 grid grid-cols-1 lg:grid-cols-3 gap-6">
    <div class="lg:col-span-2 space-y-4" id="input-sections">
      </div>

    <div class="lg:col-span-1 space-y-4 lg:sticky top-4 self-start no-print">
      <div class="bg-white p-4 rounded-xl border border-gray-200 shadow-lg">
          <div class="text-center">
              <div class="text-sm text-gray-600">Totale Geschatte Jaarkosten</div>
              <div id="total-cost-main" class="text-4xl font-bold my-2 text-[var(--brand-color)]">€ 0</div>
              <div id="monthly-cost-main" class="text-gray-500">€ 0 / maand</div>
          </div>
          <div id="costs-breakdown" class="mt-4 space-y-2 border-t pt-4">
              </div>
      </div>
       <div class="bg-white p-4 rounded-xl border border-gray-200">
           <h3 class="font-semibold mb-2">Energiebalans (per jaar)</h3>
           <div id="energy-balance" class="space-y-3">
               </div>
       </div>
    </div>
  </main>
  
  <div class="fixed bottom-0 left-0 right-0 bg-white/90 backdrop-blur-sm border-t border-gray-200 p-3 no-print shadow-[0_-4px_12px_rgba(0,0,0,0.06)] z-10">
      <div class="max-w-7xl mx-auto flex items-center justify-center lg:justify-end">
          <div class="text-center">
              <div class="text-sm text-gray-600">Totale Jaarkosten</div>
              <div id="total-cost-floater" class="text-2xl font-bold text-[var(--brand-color)]">€ 0</div>
          </div>
      </div>
  </div>

  <div id="pdf-summary" class="p-4 bg-white text-black">
      <h2 class="text-2xl font-bold mb-6 text-black">Samenvatting Energiecalculator</h2>
      <div id="pdf-summary-content" class="grid grid-cols-2 gap-x-8 gap-y-3 text-sm">
          </div>
  </div>

  <script type="text/javascript">
    document.addEventListener('DOMContentLoaded', () => {
      
      // --- DATA & CONSTANTS ---
      const ZONES = [ { id: 'med', name: 'Méditerranée (zacht)', hdd: 1400, pool_temp: 22 }, { id: 'ouest', name: 'Zuid‑West / Atlantisch', hdd: 1900, pool_temp: 20 }, { id: 'paris', name: 'Noord / Parijs (Île-de-France)', hdd: 2200, pool_temp: 19 }, { id: 'centre', name: 'Centraal / Bourgogne', hdd: 2500, pool_temp: 19 }, { id: 'est', name: 'Oost / Elzas‑Lotharingen', hdd: 2800, pool_temp: 18 }, { id: 'mont', name: 'Bergen (koel)', hdd: 3400, pool_temp: 17 }, ];
      const PV_YIELD = { med: 1450, ouest: 1250, paris: 1150, centre: 1200, est: 1150, mont: 1100 };
      const DEFAULT_APPLIANCES = [ { id: 'fridge', label: 'Koelkast/vriezer', kwh: 250, on: true }, { id: 'wash', label: 'Wassen/drogen', kwh: 220, on: true }, { id: 'dish', label: 'Vaatwasser', kwh: 160, on: true }, { id: 'it', label: 'IT & randapparatuur', kwh: 150, on: true }, { id: 'tv', label: 'TV & media', kwh: 120, on: true }, { id: 'small', label: 'Kleine verbruikers', kwh: 150, on: true }, { id: 'lighting', label: 'Verlichting (LED)', kwh: 180, on: true }, ];
      const PRICE_DEFAULTS_USER = { elec: 0.25, gas: 1.20, fioul: 1.15, pellet: 0.60, wood: 85, propaan: 1.80, petroleum: 2.00 };
      const ENERGY_UNITS = { elec: '€/kWh', gas: '€/m³', fioul: '€/L', pellet: '€/kg', wood: '€/stère', propaan: '€/L', petroleum: '€/L' };
      const KWH_CONVERSION = { elec: 1, gas: 10, fioul: 10, pellet: 5, wood: 1800, propaan: 7.1, petroleum: 10 };
      const HEAT_MAIN = [ { key: 'elec', label: 'Elektrisch (direct)' }, { key: 'hp', label: 'Warmtepomp (SCOP)' }, { key: 'gas', label: 'Aardgas (ketel η)' }, { key: 'fioul', label: 'Fioul/mazout (η)' }, { key: 'pellet', label: 'Houtpellets‑CV (η)' }, { key: 'wood', label: 'Hout‑CV (η)' }, ];
      const HEAT_AUX = [ { key: 'none', label: 'Geen bijverwarming' }, { key: 'inverter', label: 'Inverter‑airco (SCOP)' }, { key: 'elec', label: 'Elektrisch (direct)' }, { key: 'pellet', label: 'Houtpelletkachel (η)' }, { key: 'wood', label: 'Houtkachel (η)' }, { key: 'petroleum', label: 'Petroleumkachel (η)' }, ];
      const DHW_TYPES = [ { key: 'elec', label: 'Boiler elektrisch' }, { key: 'gas', label: 'Gasgeiser/ketel (η)' }, { key: 'hp', label: 'WP‑boiler (SCOP)' }, { key: 'solar', label: 'Zonneboiler' }, ];
      const POOL_HEAT = [ { key: 'none', label: 'Geen verwarming' }, { key: 'elec', label: 'Elektrisch' }, { key: 'gas', label: 'Gas (η)' }, { key: 'hp', label: 'Warmtepomp (SCOP)' }, ];
      const U_PRESETS = { wall: {'Ongeïsoleerd (~1975)': 2.0, 'Matig (~5cm)': 0.8, 'Goed (~10cm)': 0.4, 'Zeer goed (15cm+)': 0.25}, roof: {'Ongeïsoleerd': 3.0, 'Matig (~10cm)': 0.5, 'Goed (~20cm)': 0.25, 'Zeer goed (30cm+)': 0.15}, floor: {'Op zand': 2.2, 'Kruipruimte': 1.2, 'Matig geïsoleerd': 0.8, 'Goed geïsoleerd': 0.3}, win: {'Enkel glas': 5.5, 'Oud dubbelglas': 2.8, 'Modern HR(+)': 1.6, 'Triple HR++': 1.0} };
      const FAQ_CONTENT = [ { q: "Hoe betrouwbaar is de uitkomst?", a: "De tool gebruikt fysisch onderbouwde formules en realistische default-waarden. Het blijft een benadering, geen officieel DPE/audit. Nauwkeurigheid stijgt met goede invoer." }, { q: "Wat betekenen U-waarde, R-waarde en Σ(U·A)?", a: "<b>U-waarde</b> (W/m²K): warmtedoorgang; hoe lager, hoe beter. <b>R-waarde</b> (m²K/W): warmteweerstand; hoe hoger, hoe beter. Het transmissieverlies wordt geschat via <b>Htr = Σ(U · A)</b>, in W/K." }, { q: "Wat is n (ACH) en Hvent?", a: "<b>n (ACH)</b> = luchtwisselingen per uur. Ventilatieverlies: <b>Hvent = 0,34 · n · V</b> (W/K), met V het verwarmde volume in m³. De factor 0,34 is een fysische constante voor lucht." }, { q: "Wat zijn HDD (graaddagen)?", a: "<b>HDD</b> (Heating Degree Days) is een maat voor de jaarlijkse stookbehoefte. Jaarwarmtevraag: <b>E ≈ H · HDD · 24 / 1000</b> (in kWh/j)." }, { q: "Wat is SCOP/COP?", a: "<b>SCOP</b> (Seasonal COP) is de seizoensprestatie van een warmtepomp. Elektriciteitsvraag ≈ warmtevraag / SCOP. Bij vorst daalt de momentane COP." } ];
      const ICONS = { building: `<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor" class="w-6 h-6"><path d="M3.75 21.75a.75.75 0 01.75-.75h15a.75.75 0 010 1.5h-15a.75.75 0 01-.75-.75zM4.5 9.75a.75.75 0 01.75-.75h13.5a.75.75 0 010 1.5H5.25a.75.75 0 01-.75-.75zM4.5 15.75a.75.75 0 01.75-.75h13.5a.75.75 0 010 1.5H5.25a.75.75 0 01-.75-.75zM8.25 2.25a.75.75 0 01.75.75v16.5a.75.75 0 01-1.5 0V3a.75.75 0 01.75-.75zM15.75 2.25a.75.75 0 01.75.75v16.5a.75.75 0 01-1.5 0V3a.75.75 0 01.75-.75z"></path></svg>`, fire: `<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor" class="w-6 h-6"><path d="M15.362 4.362a1.75 1.75 0 012.474 0 1.75 1.75 0 010 2.474l-5.333 5.333-3.724-3.724a.75.75 0 011.06-1.06l2.664 2.664 5.333-5.333a.75.75 0 01-1.06-1.06l-5.333 5.333-2.664-2.664a1.75 1.75 0 010-2.474 1.75 1.75 0 012.474 0l2.664 2.664 5.333-5.333z"></path></svg>`, bolt: `<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor" class="w-6 h-6"><path d="M3.75 12h16.5m-16.5 3.75h16.5M3.75 19.5h16.5M5.25 4.5h13.5c.828 0 1.5.672 1.5 1.5v3.75c0 .828-.672 1.5-1.5 1.5H5.25c-.828 0-1.5-.672-1.5-1.5V6c0-.828.672-1.5 1.5-1.5z"></path></svg>`, beaker: `<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor" class="w-6 h-6"><path d="M9.75 21.75a.75.75 0 01-.75-.75V11.25a.75.75 0 011.5 0v9.75a.75.75 0 01-.75-.75zM14.25 21.75a.75.75 0 01-.75-.75V11.25a.75.75 0 011.5 0v9.75a.75.75 0 01-.75.75zM12 2.25c-5.385 0-9.75 4.365-9.75 9.75s4.365 9.75 9.75 9.75 9.75-4.365 9.75-9.75S17.385 2.25 12 2.25zm0 18a8.25 8.25 0 100-16.5 8.25 8.25 0 000 16.5z"></path></svg>`, currency: `<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor" class="w-6 h-6"><path d="M12 1.5a.75.75 0 01.75.75v1.5a.75.75 0 01-1.5 0v-1.5A.75.75 0 0112 1.5zM18.75 6a.75.75 0 000-1.5h-1.5a.75.75 0 000 1.5h1.5zM12 21a.75.75 0 01-.75-.75v-1.5a.75.75 0 011.5 0v1.5A.75.75 0 0112 21zM5.25 6a.75.75 0 000-1.5h-1.5a.75.75 0 000 1.5h1.5z"></path></svg>`, faq: `<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor" class="w-6 h-6"><path d="M9.879 7.519c1.171-1.025 3.071-1.025 4.242 0 1.172 1.025 1.172 2.687 0 3.712-.203.179-.43.326-.67.442-.745.361-1.45.999-1.45 1.827v.75M21 12a9 9 0 11-18 0 9 9 0 0118 0zm-9 5.25h.008v.008H12v-.008z"></path></svg>`, debug: `<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor" class="w-6 h-6"><path d="M11.42 15.17L17.17 20.92M5.58 11.42L11.33 17.17M12.75 5.58L18.5 11.33M6.92 6.92L12.67 12.67M3.08 15.17L8.83 20.92M9.75 3.08L15.5 8.83M16.58 5.58L22.33 11.33M11.33 1.25L17.08 7M18.5 1.25L24.25 7"></path></svg>` };

      const createTooltip = (text) => `<span class="tooltip"><svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" class="w-4 h-4 text-gray-400 cursor-help"><path stroke-linecap="round" stroke-linejoin="round" d="M9.879 7.519c1.171-1.025 3.071-1.025 4.242 0 1.172 1.025 1.172 2.687 0 3.712-.203.179-.43.326-.67.442-.745.361-1.45.999-1.45 1.827v.75M21 12a9 9 0 11-18 0 9 9 0 0118 0zm-9 5.25h.008v.008H12v-.008z"></path></svg><span class="tooltip-text">${text}</span></span>`;
      const createNumberInput = (id, label, value, unit, tooltip) => `<div><label class="block text-sm font-medium text-gray-700 mb-1 flex items-center gap-1">${label} ${tooltip ? createTooltip(tooltip) : ''}</label><div class="flex"><input id="${id}" type="text" inputmode="decimal" value="${value}" class="w-full p-2 border-gray-300 border rounded-l-md text-sm"><span class="inline-flex items-center px-3 rounded-r-md border border-l-0 border-gray-300 bg-gray-50 text-gray-500 text-sm">${unit}</span></div></div>`;
      const createSelect = (id, label, options, selected, tooltip) => `<div><label class="block text-sm font-medium text-gray-700 mb-1 flex items-center gap-1">${label} ${tooltip ? createTooltip(tooltip) : ''}</label><select id="${id}" class="w-full p-2 border-gray-300 border rounded-md text-sm">${options.map(o => `<option value="${o.key}" ${o.key === selected ? 'selected' : ''}>${o.label}</option>`).join('')}</select></div>`;

      // --- RENDER UI ---
      const renderUI = () => {
        const container = getEl('input-sections');
        if (!container) return;

        container.innerHTML = [
          { number: 1, title: "Klimaat & Woning", icon: ICONS.building, initiallyOpen: true, content: `...` },
          { number: 2, title: "Verwarming & Tapwater", icon: ICONS.fire, content: `...` },
          { number: 3, title: "Elektra: Verbruikers & PV", icon: ICONS.bolt, content: `...` },
          { number: 4, title: "Optioneel: Zwembad", icon: ICONS.beaker, content: `...` },
          { number: 5, title: "Energieprijzen", icon: ICONS.currency, content: `...` },
          { number: 6, title: "Veelgestelde Vragen & Rekenregels", icon: ICONS.faq, content: `...` },
          { number: 7, title: "Debug Paneel (voor controle)", icon: ICONS.debug, content: `...` },
        ].map(section => {
            let contentHtml = '';
            // Dynamically build content for each section based on its number
            if (section.number === 1) {
              contentHtml = `
                <div class="grid grid-cols-2 md:grid-cols-4 gap-4">
                  ${createSelect('zone', 'Klimaatzone', ZONES.map(z=>({key: z.id, label: z.name})), 'paris')}
                  ${createNumberInput('setpoint', 'Binnen temperatuur', '20', '°C')}
                  ${createNumberInput('volume', 'Verwarmd volume', '250', 'm³')}
                  ${createNumberInput('ach', 'Luchtwisseling (n)', '0.5', '1/uur', "Een maat voor kieren en ventilatie. Kies 0,5 voor een modern, goed geïsoleerd huis; 1,0-1,5 voor een ouder, 'ademend' huis.")}
                </div>
                <div class="mt-4 p-4 bg-gray-50 rounded-lg border">
                  <h3 class="text-md font-semibold mb-3">Isolatie (Oppervlakte & U-waarde)</h3>
                  <div class="grid grid-cols-1 md:grid-cols-2 gap-x-6 gap-y-4">
                    ${Object.entries(U_PRESETS).map(([key, presets]) => {
                      const name = {wall:'Muur', roof:'Dak', floor:'Vloer', win:'Ramen'}[key];
                      const initialA = {wall:120, roof:100, floor:100, win:20}[key];
                      const initialU = {wall:0.5, roof:0.25, floor:0.35, win:1.5}[key];
                      return `<div data-u-group="${key}">
                        <div class="grid grid-cols-2 gap-2">
                          ${createNumberInput(`${key}A`, `${name} (A)`, initialA, 'm²')}
                          ${createNumberInput(`${key}U`, 'U-waarde', initialU, 'U', "Warmtedoorgangscoëfficiënt. Hoe lager, hoe beter de isolatie.")}
                        </div>
                        <div class="flex flex-wrap gap-1 mt-2">
                          ${Object.entries(presets).map(([label, value]) => `<button data-u-value="${value}" class="u-preset text-xs px-2 py-1 bg-gray-200 hover:bg-gray-300 rounded">${label}</button>`).join('')}
                        </div>
                      </div>`
                    }).join('')}
                  </div>
                </div>
              `;
            } else if (section.number === 2) {
              contentHtml = `
                <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
                    <div>
                        <h3 class="font-semibold mb-2">Ruimteverwarming</h3>
                        <div class="space-y-4">
                            ${createSelect('mainType', 'Hoofdverwarming', HEAT_MAIN, 'hp')}
                            <div id="main-scop-container">${createNumberInput('mainScop', 'SCOP Hoofd-WP', '3.2', '', 'Seizoensgemiddeld rendement van de warmtepomp. Bijv. 3.2 betekent dat 1 kWh elektra 3.2 kWh warmte levert.')}</div>
                            <div id="main-eta-container" class="hidden">${createNumberInput('mainEta', 'Rendement η Hoofd', '0.9', '', 'Efficiëntie van de ketel. 0.9 = 90% van de brandstof wordt nuttige warmte.')}</div>
                            ${createSelect('auxType', 'Bijverwarming', HEAT_AUX, 'wood')}
                            <div id="aux-share-container">
                              ${createSelect('auxSharePreset', 'Aandeel bijverwarming', [ {key: '10', label: 'Incidenteel (~10%)'}, {key: '25', label: 'Regelmatig (~25%)'}, {key: '50', label: 'Vaak (~50%)'}, {key: '70', label: 'Bijna dagelijks (~70%)'}, {key: 'custom', label: 'Zelf invullen...'} ], '25')}
                              <div id="aux-share-custom-container" class="hidden mt-2">${createNumberInput('auxShareCustom', 'Zelf invullen', '25', '%')}</div>
                            </div>
                            <div id="aux-scop-container" class="hidden">${createNumberInput('auxScop', 'SCOP Bij-WP (Airco)', '3.2', '', 'Seizoensgemiddeld rendement van de airco in verwarmingsmodus.')}</div>
                            <div id="aux-eta-container">${createNumberInput('auxEta', 'Rendement η Bij', '0.85', '', 'Efficiëntie van de kachel/haard. Een open haard heeft een zeer laag rendement.')}</div>
                        </div>
                    </div>
                     <div>
                        <h3 class="font-semibold mb-2">Warm Tapwater (ECS)</h3>
                        <div class="space-y-4">
                             ${createSelect('dhwType', 'Type tapwater systeem', DHW_TYPES, 'hp')}
                             <div id="dhw-scop-container">${createNumberInput('dhwScop', 'SCOP WP-boiler', '2.5', '')}</div>
                             <div id="dhw-eta-container" class="hidden">${createNumberInput('dhwEta', 'Rendement η', '0.9', '')}</div>
                             ${createNumberInput('showers', 'Douches per dag', '2', '')}
                             ${createNumberInput('litersPer', 'Liters per douche', '55', 'L')}
                        </div>
                    </div>
                 </div>
              `;
            } else if (section.number === 7) {
                 contentHtml = `<div class="text-xs font-mono bg-gray-800 text-white p-4 rounded-lg overflow-x-auto" id="debug-output"></div>`;
            } else {
              // Placeholder for other sections to keep it manageable
              contentHtml = `<p>Sectie ${section.number} komt hier.</p>`;
            }

            return `
              <div class="bg-white border border-gray-200 rounded-xl shadow-sm">
                <button class="accordion-button w-full flex items-center justify-between p-4 text-left">
                  <div class="flex items-center gap-4">
                    <div class="w-8 h-8 flex items-center justify-center bg-gray-100 rounded-full text-[var(--brand-color)]">${section.icon}</div>
                    <span class="font-semibold text-lg text-gray-800">${section.number}. ${section.title}</span>
                  </div>
                  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20" fill="currentColor" class="chevron w-5 h-5 text-gray-500 transition-transform duration-300 ${section.initiallyOpen ? 'rotate-180' : ''}"><path fill-rule="evenodd" d="M5.22 8.22a.75.75 0 011.06 0L10 11.94l3.72-3.72a.75.75 0 111.06 1.06l-4.25 4.25a.75.75 0 01-1.06 0L5.22 9.28a.75.75 0 010-1.06z" clip-rule="evenodd"></path></svg>
                </button>
                <div class="accordion-content ${section.initiallyOpen ? 'open' : ''}">
                  <div class="overflow-hidden">
                    <div class="p-4 pt-0">${contentHtml}</div>
                  </div>
                </div>
              </div>
            `;
        }).join('');
      };
      
      // ... rest of the script
    });
  </script>
</body>
</html>